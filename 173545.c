static brcmf_notify_connect_status(struct brcmf_if const struct brcmf_event_msg *e, void *data) struct brcmf_cfg80211_info * cfg = ifp -> drvr -> config ; struct net_device * ndev = ifp -> ndev ; if ( brcmf_is_apmode ( ifp -> vif ) )  if ( brcmf_is_linkup ( e ) )  if ( brcmf_is_linkdown ( e ) )  static bool brcmf_is_linkdown(const struct brcmf_event_msg *e) u32 event = e -> event_code ; u16 flags = e -> flags ; if ( ( event == BRCMF_E_DEAUTH ) || ( event == BRCMF_E_DEAUTH_IND ) || ( event == BRCMF_E_DISASSOC_IND ) || ( ( event == BRCMF_E_LINK ) && ( ! ( flags & BRCMF_EVENT_MSG_LINK ) ) ) )  return true ; return false ; if ( brcmf_is_nonetwork ( cfg , e ) )  static bool brcmf_is_nonetwork(struct brcmf_cfg80211_info const struct brcmf_event_msg *e) u32 event = e -> event_code ; u32 status = e -> status ; if ( event == BRCMF_E_LINK && status == BRCMF_E_STATUS_NO_NETWORKS )  return true ; if ( event == BRCMF_E_SET_SSID && status != BRCMF_E_STATUS_SUCCESS )  return true ; return false ; if ( brcmf_is_ibssmode ( ifp -> vif ) )  static bool brcmf_is_ibssmode(struct brcmf_cfg80211_vif *vif) return vif -> wdev . iftype == NL80211_IFTYPE_ADHOC ; brcmf_bss_connect_done ( cfg , ndev , e , false ); static brcmf_bss_connect_done(struct brcmf_cfg80211_info struct net_device *ndev, const struct brcmf_event_msg bool completed) struct brcmf_if * ifp = netdev_priv ( ndev ) ; struct brcmf_cfg80211_profile * profile = & ifp -> vif -> profile ; if ( test_and_clear_bit ( BRCMF_VIF_STATUS_CONNECTING , & ifp -> vif -> sme_state ) )  if ( completed )  memcpy ( profile -> bssid , e -> addr , ETH_ALEN ); cfg80211_connect_result ( ndev , ( u8 * ) profile -> bssid , conn_info -> req_ie , conn_info -> req_ie_len , conn_info -> resp_ie , conn_info -> resp_ie_len , completed ? WLAN_STATUS_SUCCESS : WLAN_STATUS_AUTH_TIMEOUT , GFP_KERNEL ); 