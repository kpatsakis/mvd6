void avcodec_string(char *buf,int buf_size,AVCodecContext *enc,int encode) if ( ! buf || buf_size <= 0 )  if ( enc -> codec_tag )  char tag_buf [ 32 ] ; av_get_codec_tag_string ( tag_buf , sizeof ( tag_buf ) , enc -> codec_tag ); size_t av_get_codec_tag_string(char *buf,size_t buf_size,unsigned int codec_tag) int i ; int len ; for (i = 0; i < 4; i++) len = snprintf ( buf , buf_size , ( ( ( codec_tag & 0xff ) >= 48 && ( codec_tag & 0xff ) <= '9' || ( codec_tag & 0xff ) >= 'a' && ( codec_tag & 0xff ) <= 'z' || ( codec_tag & 0xff ) >= 'A' && ( codec_tag & 0xff ) <= 'Z' || ( ( codec_tag & 0xff ) == '.' || ( codec_tag & 0xff ) == 32 || ( codec_tag & 0xff ) == '-' || ( codec_tag & 0xff ) == '_' ) ? "%c" : "[%d]" ) ) , codec_tag & 0xff ); buf += len; buf_size = ( buf_size > len ? buf_size - len : 0 ); ret += len; codec_tag >>= 8; return ret ; 