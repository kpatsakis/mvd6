 TryToMapAddon(nsACString &path) if ( mAlreadyMappedToAddon || ! mWorkerPrivate )  nsCOMPtr < nsIURI > scriptURI ; if ( NS_FAILED ( NS_NewURI ( getter_AddRefs ( scriptURI ) , mWorkerPrivate -> ScriptURL ( ) ) ) )  if ( ! XRE_IsParentProcess ( ) )  nsAutoCString addonId ; bool ok ; nsCOMPtr < amIAddonManager > addonManager = do_GetService ( "@mozilla.org/addons/integration;1" ) ; if ( ! addonManager || NS_FAILED ( addonManager -> MapURIToAddonID ( scriptURI , addonId , & ok ) ) || ! ok )  static const size_t explicitLength = strlen ( "explicit/" ) ; path . Insert ( addonId , explicitLength ); 