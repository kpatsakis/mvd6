static token parse_bracket_exp() charclass ccl ; memset ( ccl , 0 , sizeof ( ccl ) ); setbit_case_fold_c ( c2 , ccl ); static void setbit_case_fold_c(int b,charclass c) wint_t wc = btowc ( b ) ; if ( wc == 0xffffffffu )  setbit ( b , c ); static void setbit(unsigned int b,charclass c) c [ b / ( 8 * sizeof ( int ) ) ] |= 1 << b % ( 8 * sizeof ( int ) ); if ( case_fold && iswalpha ( wc ) )  setbit_wc ( ( iswupper ( wc ) ? towlower ( wc ) : towupper ( wc ) ) , c ); static _Bool setbit_wc(wint_t wc,charclass c) int b = wctob ( wc ) ; if ( b == - 1 )  setbit ( b , c ); static void setbit(unsigned int b,charclass c) c [ b / ( 8 * sizeof ( int ) ) ] |= 1 << b % ( 8 * sizeof ( int ) ); setbit ( b , c ); static void setbit(unsigned int b,charclass c) c [ b / ( 8 * sizeof ( int ) ) ] |= 1 << b % ( 8 * sizeof ( int ) ); if ( case_fold && ( * __ctype_b_loc ( ) ) [ ( int ) b ] & ( ( unsigned short ) _ISalpha ) )  setbit_c ( ( ( * __ctype_b_loc ( ) ) [ ( int ) b ] & ( ( unsigned short ) _ISupper ) ? tolower ( b ) : toupper ( b ) ) , c ); static void setbit_c(int b,charclass c) if ( __ctype_get_mb_cur_max ( ) > 1 && btowc ( b ) == 0xffffffffu )  setbit ( b , c ); static void setbit(unsigned int b,charclass c) c [ b / ( 8 * sizeof ( int ) ) ] |= 1 << b % ( 8 * sizeof ( int ) ); setbit_case_fold_c ( c , ccl ); static void setbit_case_fold_c(int b,charclass c) wint_t wc = btowc ( b ) ; if ( wc == 0xffffffffu )  setbit ( b , c ); if ( case_fold && iswalpha ( wc ) )  setbit_wc ( ( iswupper ( wc ) ? towlower ( wc ) : towupper ( wc ) ) , c ); setbit ( b , c ); if ( case_fold && ( * __ctype_b_loc ( ) ) [ ( int ) b ] & ( ( unsigned short ) _ISalpha ) )  setbit_c ( ( ( * __ctype_b_loc ( ) ) [ ( int ) b ] & ( ( unsigned short ) _ISupper ) ? tolower ( b ) : toupper ( b ) ) , c ); setbit_case_fold_c ( c , ccl ); static void setbit_case_fold_c(int b,charclass c) wint_t wc = btowc ( b ) ; if ( wc == 0xffffffffu )  setbit ( b , c ); if ( case_fold && iswalpha ( wc ) )  setbit_wc ( ( iswupper ( wc ) ? towlower ( wc ) : towupper ( wc ) ) , c ); setbit ( b , c ); if ( case_fold && ( * __ctype_b_loc ( ) ) [ ( int ) b ] & ( ( unsigned short ) _ISalpha ) )  setbit_c ( ( ( * __ctype_b_loc ( ) ) [ ( int ) b ] & ( ( unsigned short ) _ISupper ) ? tolower ( b ) : toupper ( b ) ) , c ); if ( ! setbit_wc ( wc , ccl ) )  static _Bool setbit_wc(wint_t wc,charclass c) int b = wctob ( wc ) ; if ( b == - 1 )  setbit ( b , c ); if ( ! setbit_wc ( wc , ccl ) )  static _Bool setbit_wc(wint_t wc,charclass c) int b = wctob ( wc ) ; if ( b == - 1 )  setbit ( b , c ); work_mbc -> cset = ( ( equal ( ccl , zeroclass ) ? ( - 1 ) : charclass_index ( ccl ) ) ); static size_t charclass_index(const int s[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))]) if ( equal ( s , dfa -> charclasses [ i ] ) )  static int equal(const int s1[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))],const int s2[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))]) return memcmp ( s1 , s2 , sizeof ( charclass ) ) == 0 ; copyset ( s , dfa -> charclasses [ i ] ); static void copyset(const int src[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))],charclass dst) memcpy ( dst , src , sizeof ( charclass ) ); static int equal(const int s1[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))],const int s2[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))]) return memcmp ( s1 , s2 , sizeof ( charclass ) ) == 0 ; notset ( ccl ); static void notset(charclass s) s [ i ] = ~s [ i ]; clrbit ( eolbyte , ccl ); static void clrbit(unsigned int b,charclass c) c [ b / ( 8 * sizeof ( int ) ) ] &= ~ ( 1 << b % ( 8 * sizeof ( int ) ) ); return ( CSET + charclass_index ( ccl ) ) ; static size_t charclass_index(const int s[((1 << 8) + 8 * sizeof(int ) - 1) / (8 * sizeof(int ))]) if ( equal ( s , dfa -> charclasses [ i ] ) )  copyset ( s , dfa -> charclasses [ i ] ); 