size_t uint8_t* size_t RTPFragmentationHeader* fragmentation) size_t new_length = 0 ; fragmentation -> fragmentationVectorSize = 0; memset ( fragmentation -> fragmentationLength , 0 , kMaxVP8Partitions * sizeof ( size_t ) ); if ( packets_ . empty ( ) )  PacketIterator it = FindNextPartitionBeginning ( packets_ . begin ( ) ) ; while ( it != packets_ . end ( ) )  const int partition_id = ( * it ) . codecSpecificHeader . codecHeader . VP8 . partitionId ; PacketIterator partition_end = FindPartitionEnd ( it ) ; fragmentation -> fragmentationOffset [ partition_id ] = ( * it ) . dataPtr - frame_buffer; fragmentation -> fragmentationLength [ partition_id ] = ( * partition_end ) . dataPtr + ( * partition_end ) . sizeBytes - ( * it ) . dataPtr; new_length += fragmentation -> fragmentationLength [ partition_id ]; it = FindNextPartitionBeginning ( partition_end ); if ( partition_id + 1 > fragmentation -> fragmentationVectorSize )  fragmentation -> fragmentationVectorSize = partition_id + 1; assert ( new_length <= frame_buffer_length ); 