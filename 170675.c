AVDictionary **setup_find_stream_info_opts(AVFormatContext *s,AVDictionary *codec_opts) int i ; AVDictionary * * opts ; if ( ! s -> nb_streams )  opts = ( av_mallocz ( ( s -> nb_streams ) * sizeof ( ( * opts ) ) ) ); if ( ! opts )  for (i = 0; i < s -> nb_streams; i++) opts [ i ] = filter_codec_opts ( codec_opts , s -> streams [ i ] -> codec -> codec_id , s , s -> streams [ i ] , ( ( void * ) 0 ) ); AVDictionary *filter_codec_opts(AVDictionary *opts,enum AVCodecID codec_id,AVFormatContext *s,AVStream *st,AVCodec *codec) AVDictionaryEntry * t = ( ( void * ) 0 ) ; while ( t = av_dict_get ( opts , "" , t , 2 ) )  char * p = strchr ( ( t -> key ) , ':' ) ; if ( p )  switch ( check_stream_specifier ( s , st , ( p + 1 ) ) )  int check_stream_specifier(AVFormatContext *s,AVStream *st,const char *spec) int ret = avformat_match_stream_specifier ( s , st , spec ) ; if ( ret < 0 )  av_log ( s , 16 , "Invalid stream specifier: %s.\n" , spec ); return ret ; * p = 0; if ( p )  * p = ':'; 